{% extends "base.html" %}
{% block title %}Manajemen User{% endblock %}

{% block content %}

<div class="card">
    <div class="card-header d-flex justify-content-between">
        <h3 class="card-title">Daftar User</h3>
        <a href="{% url 'users.create' %}" class="btn btn-primary">+ Tambah User</a>
    </div>

    <div class="card-body">

        {% if messages %}
            {% for msg in messages %}
                <div class="alert alert-{{ msg.tags }}">{{ msg }}</div>
            {% endfor %}
        {% endif %}

        <table class="table table-bordered table-striped datatable">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Status</th>
                    <th width="15%">Aksi</th>
                </tr>
            </thead>

            <tbody>
                {% for u in users %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ u.username }}</td>
                    <td>{{ u.email }}</td>
                    <td>
                        {% if u.is_superuser %}
                            <span class="badge badge-danger">Admin</span>
                        {% elif u.is_staff %}
                            <span class="badge badge-warning">Staff</span>
                        {% else %}
                            <span class="badge badge-secondary">User</span>
                        {% endif %}
                    </td>

                    <td>
                        {% if u.is_active %}
                            <span class="badge badge-success">Aktif</span>
                        {% else %}
                            <span class="badge badge-secondary">Nonaktif</span>
                        {% endif %}
                    </td>

                    <td>
                        <a href="{% url 'users.edit' u.id %}" class="btn btn-sm btn-warning">Edit</a>
                        <a href="{% url 'users.delete' u.id %}" onclick="return confirm('Hapus user ini?')" class="btn btn-sm btn-danger">Hapus</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center">Belum ada user.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>

{% endblock %}
